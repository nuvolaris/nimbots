var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function o(t){t.forEach(e)}function i(t){return"function"==typeof t}function r(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,n,o){e.$$.on_destroy.push(function(e,...n){if(null==e)return t;const o=e.subscribe(...n);return o.unsubscribe?()=>o.unsubscribe():o}(n,o))}function s(t,e){t.appendChild(e)}function l(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function c(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function d(t){return document.createElement(t)}function h(t){return document.createTextNode(t)}function p(){return h(" ")}function f(){return h("")}function m(t,e,n,o){return t.addEventListener(e,n,o),()=>t.removeEventListener(e,n,o)}function g(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function b(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function y(t,e){t.value=null==e?"":e}function w(t,e,n,o){t.style.setProperty(e,n,o?"important":"")}function v(t,e){for(let n=0;n<t.options.length;n+=1){const o=t.options[n];if(o.__value===e)return void(o.selected=!0)}}function x(t){const e=t.querySelector(":checked")||t.options[0];return e&&e.__value}let _;function k(t){_=t}function S(){if(!_)throw new Error("Function called outside component initialization");return _}const E=[],C=[],A=[],T=[],q=Promise.resolve();let M=!1;function O(t){A.push(t)}let $=!1;const I=new Set;function R(){if(!$){$=!0;do{for(let t=0;t<E.length;t+=1){const e=E[t];k(e),B(e.$$)}for(k(null),E.length=0;C.length;)C.pop()();for(let t=0;t<A.length;t+=1){const e=A[t];I.has(e)||(I.add(e),e())}A.length=0}while(E.length);for(;T.length;)T.pop()();M=!1,$=!1,I.clear()}}function B(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(O)}}const P=new Set;let F;function z(){F={r:0,c:[],p:F}}function j(){F.r||o(F.c),F=F.p}function N(t,e){t&&t.i&&(P.delete(t),t.i(e))}function L(t,e,n,o){if(t&&t.o){if(P.has(t))return;P.add(t),F.c.push((()=>{P.delete(t),o&&(n&&t.d(1),o())})),t.o(e)}}function D(t){t&&t.c()}function U(t,n,r){const{fragment:a,on_mount:s,on_destroy:l,after_update:u}=t.$$;a&&a.m(n,r),O((()=>{const n=s.map(e).filter(i);l?l.push(...n):o(n),t.$$.on_mount=[]})),u.forEach(O)}function G(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function H(t,e){-1===t.$$.dirty[0]&&(E.push(t),M||(M=!0,q.then(R)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function J(e,i,r,a,s,l,c=[-1]){const d=_;k(e);const h=i.props||{},p=e.$$={fragment:null,ctx:null,props:l,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:n(),dirty:c,skip_bound:!1};let f=!1;if(p.ctx=r?r(e,h,((t,n,...o)=>{const i=o.length?o[0]:n;return p.ctx&&s(p.ctx[t],p.ctx[t]=i)&&(!p.skip_bound&&p.bound[t]&&p.bound[t](i),f&&H(e,t)),n})):[],p.update(),f=!0,o(p.before_update),p.fragment=!!a&&a(p.ctx),i.target){if(i.hydrate){const t=function(t){return Array.from(t.childNodes)}(i.target);p.fragment&&p.fragment.l(t),t.forEach(u)}else p.fragment&&p.fragment.c();i.intro&&N(e.$$.fragment),U(e,i.target,i.anchor),R()}k(d)}class V{$destroy(){G(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function K(t,e){void 0===e&&(e={});var n=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===n&&o.firstChild?o.insertBefore(i,o.firstChild):o.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}K('/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */\n\n/* Document\n   ========================================================================== */\n\n/**\n * 1. Correct the line height in all browsers.\n * 2. Prevent adjustments of font size after orientation changes in iOS.\n */\n\nhtml {\n  line-height: 1.15; /* 1 */\n  -webkit-text-size-adjust: 100%; /* 2 */\n}\n\n/* Sections\n   ========================================================================== */\n\n/**\n * Remove the margin in all browsers.\n */\n\nbody {\n  margin: 0;\n}\n\n/**\n * Render the `main` element consistently in IE.\n */\n\nmain {\n  display: block;\n}\n\n/**\n * Correct the font size and margin on `h1` elements within `section` and\n * `article` contexts in Chrome, Firefox, and Safari.\n */\n\nh1 {\n  font-size: 2em;\n  margin: 0.67em 0;\n}\n\n/* Grouping content\n   ========================================================================== */\n\n/**\n * 1. Add the correct box sizing in Firefox.\n * 2. Show the overflow in Edge and IE.\n */\n\nhr {\n  box-sizing: content-box; /* 1 */\n  height: 0; /* 1 */\n  overflow: visible; /* 2 */\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\npre {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/* Text-level semantics\n   ========================================================================== */\n\n/**\n * Remove the gray background on active links in IE 10.\n */\n\na {\n  background-color: transparent;\n}\n\n/**\n * 1. Remove the bottom border in Chrome 57-\n * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.\n */\n\nabbr[title] {\n  border-bottom: none; /* 1 */\n  text-decoration: underline; /* 2 */\n  text-decoration: underline dotted; /* 2 */\n}\n\n/**\n * Add the correct font weight in Chrome, Edge, and Safari.\n */\n\nb,\nstrong {\n  font-weight: bolder;\n}\n\n/**\n * 1. Correct the inheritance and scaling of font size in all browsers.\n * 2. Correct the odd `em` font sizing in all browsers.\n */\n\ncode,\nkbd,\nsamp {\n  font-family: monospace, monospace; /* 1 */\n  font-size: 1em; /* 2 */\n}\n\n/**\n * Add the correct font size in all browsers.\n */\n\nsmall {\n  font-size: 80%;\n}\n\n/**\n * Prevent `sub` and `sup` elements from affecting the line height in\n * all browsers.\n */\n\nsub,\nsup {\n  font-size: 75%;\n  line-height: 0;\n  position: relative;\n  vertical-align: baseline;\n}\n\nsub {\n  bottom: -0.25em;\n}\n\nsup {\n  top: -0.5em;\n}\n\n/* Embedded content\n   ========================================================================== */\n\n/**\n * Remove the border on images inside links in IE 10.\n */\n\nimg {\n  border-style: none;\n}\n\n/* Forms\n   ========================================================================== */\n\n/**\n * 1. Change the font styles in all browsers.\n * 2. Remove the margin in Firefox and Safari.\n */\n\nbutton,\ninput,\noptgroup,\nselect,\ntextarea {\n  font-family: inherit; /* 1 */\n  font-size: 100%; /* 1 */\n  line-height: 1.15; /* 1 */\n  margin: 0; /* 2 */\n}\n\n/**\n * Show the overflow in IE.\n * 1. Show the overflow in Edge.\n */\n\nbutton,\ninput { /* 1 */\n  overflow: visible;\n}\n\n/**\n * Remove the inheritance of text transform in Edge, Firefox, and IE.\n * 1. Remove the inheritance of text transform in Firefox.\n */\n\nbutton,\nselect { /* 1 */\n  text-transform: none;\n}\n\n/**\n * Correct the inability to style clickable types in iOS and Safari.\n */\n\nbutton,\n[type="button"],\n[type="reset"],\n[type="submit"] {\n  -webkit-appearance: button;\n}\n\n/**\n * Remove the inner border and padding in Firefox.\n */\n\nbutton::-moz-focus-inner,\n[type="button"]::-moz-focus-inner,\n[type="reset"]::-moz-focus-inner,\n[type="submit"]::-moz-focus-inner {\n  border-style: none;\n  padding: 0;\n}\n\n/**\n * Restore the focus styles unset by the previous rule.\n */\n\nbutton:-moz-focusring,\n[type="button"]:-moz-focusring,\n[type="reset"]:-moz-focusring,\n[type="submit"]:-moz-focusring {\n  outline: 1px dotted ButtonText;\n}\n\n/**\n * Correct the padding in Firefox.\n */\n\nfieldset {\n  padding: 0.35em 0.75em 0.625em;\n}\n\n/**\n * 1. Correct the text wrapping in Edge and IE.\n * 2. Correct the color inheritance from `fieldset` elements in IE.\n * 3. Remove the padding so developers are not caught out when they zero out\n *    `fieldset` elements in all browsers.\n */\n\nlegend {\n  box-sizing: border-box; /* 1 */\n  color: inherit; /* 2 */\n  display: table; /* 1 */\n  max-width: 100%; /* 1 */\n  padding: 0; /* 3 */\n  white-space: normal; /* 1 */\n}\n\n/**\n * Add the correct vertical alignment in Chrome, Firefox, and Opera.\n */\n\nprogress {\n  vertical-align: baseline;\n}\n\n/**\n * Remove the default vertical scrollbar in IE 10+.\n */\n\ntextarea {\n  overflow: auto;\n}\n\n/**\n * 1. Add the correct box sizing in IE 10.\n * 2. Remove the padding in IE 10.\n */\n\n[type="checkbox"],\n[type="radio"] {\n  box-sizing: border-box; /* 1 */\n  padding: 0; /* 2 */\n}\n\n/**\n * Correct the cursor style of increment and decrement buttons in Chrome.\n */\n\n[type="number"]::-webkit-inner-spin-button,\n[type="number"]::-webkit-outer-spin-button {\n  height: auto;\n}\n\n/**\n * 1. Correct the odd appearance in Chrome and Safari.\n * 2. Correct the outline style in Safari.\n */\n\n[type="search"] {\n  -webkit-appearance: textfield; /* 1 */\n  outline-offset: -2px; /* 2 */\n}\n\n/**\n * Remove the inner padding in Chrome and Safari on macOS.\n */\n\n[type="search"]::-webkit-search-decoration {\n  -webkit-appearance: none;\n}\n\n/**\n * 1. Correct the inability to style clickable types in iOS and Safari.\n * 2. Change font properties to `inherit` in Safari.\n */\n\n::-webkit-file-upload-button {\n  -webkit-appearance: button; /* 1 */\n  font: inherit; /* 2 */\n}\n\n/* Interactive\n   ========================================================================== */\n\n/*\n * Add the correct display in Edge, IE 10+, and Firefox.\n */\n\ndetails {\n  display: block;\n}\n\n/*\n * Add the correct display in all browsers.\n */\n\nsummary {\n  display: list-item;\n}\n\n/* Misc\n   ========================================================================== */\n\n/**\n * Add the correct display in IE 10+.\n */\n\ntemplate {\n  display: none;\n}\n\n/**\n * Add the correct display in IE 10.\n */\n\n[hidden] {\n  display: none;\n}\n');K("*,*:after,*:before{box-sizing:inherit}html{box-sizing:border-box;font-size:62.5%}body{color:#606c76;font-family:'Roboto', 'Helvetica Neue', 'Helvetica', 'Arial', sans-serif;font-size:1.6em;font-weight:300;letter-spacing:.01em;line-height:1.6}blockquote{border-left:0.3rem solid #d1d1d1;margin-left:0;margin-right:0;padding:1rem 1.5rem}blockquote *:last-child{margin-bottom:0}.button,button,input[type='button'],input[type='reset'],input[type='submit']{background-color:#9b4dca;border:0.1rem solid #9b4dca;border-radius:.4rem;color:#fff;cursor:pointer;display:inline-block;font-size:1.1rem;font-weight:700;height:3.8rem;letter-spacing:.1rem;line-height:3.8rem;padding:0 3.0rem;text-align:center;text-decoration:none;text-transform:uppercase;white-space:nowrap}.button:focus,.button:hover,button:focus,button:hover,input[type='button']:focus,input[type='button']:hover,input[type='reset']:focus,input[type='reset']:hover,input[type='submit']:focus,input[type='submit']:hover{background-color:#606c76;border-color:#606c76;color:#fff;outline:0}.button[disabled],button[disabled],input[type='button'][disabled],input[type='reset'][disabled],input[type='submit'][disabled]{cursor:default;opacity:.5}.button[disabled]:focus,.button[disabled]:hover,button[disabled]:focus,button[disabled]:hover,input[type='button'][disabled]:focus,input[type='button'][disabled]:hover,input[type='reset'][disabled]:focus,input[type='reset'][disabled]:hover,input[type='submit'][disabled]:focus,input[type='submit'][disabled]:hover{background-color:#9b4dca;border-color:#9b4dca}.button.button-outline,button.button-outline,input[type='button'].button-outline,input[type='reset'].button-outline,input[type='submit'].button-outline{background-color:transparent;color:#9b4dca}.button.button-outline:focus,.button.button-outline:hover,button.button-outline:focus,button.button-outline:hover,input[type='button'].button-outline:focus,input[type='button'].button-outline:hover,input[type='reset'].button-outline:focus,input[type='reset'].button-outline:hover,input[type='submit'].button-outline:focus,input[type='submit'].button-outline:hover{background-color:transparent;border-color:#606c76;color:#606c76}.button.button-outline[disabled]:focus,.button.button-outline[disabled]:hover,button.button-outline[disabled]:focus,button.button-outline[disabled]:hover,input[type='button'].button-outline[disabled]:focus,input[type='button'].button-outline[disabled]:hover,input[type='reset'].button-outline[disabled]:focus,input[type='reset'].button-outline[disabled]:hover,input[type='submit'].button-outline[disabled]:focus,input[type='submit'].button-outline[disabled]:hover{border-color:inherit;color:#9b4dca}.button.button-clear,button.button-clear,input[type='button'].button-clear,input[type='reset'].button-clear,input[type='submit'].button-clear{background-color:transparent;border-color:transparent;color:#9b4dca}.button.button-clear:focus,.button.button-clear:hover,button.button-clear:focus,button.button-clear:hover,input[type='button'].button-clear:focus,input[type='button'].button-clear:hover,input[type='reset'].button-clear:focus,input[type='reset'].button-clear:hover,input[type='submit'].button-clear:focus,input[type='submit'].button-clear:hover{background-color:transparent;border-color:transparent;color:#606c76}.button.button-clear[disabled]:focus,.button.button-clear[disabled]:hover,button.button-clear[disabled]:focus,button.button-clear[disabled]:hover,input[type='button'].button-clear[disabled]:focus,input[type='button'].button-clear[disabled]:hover,input[type='reset'].button-clear[disabled]:focus,input[type='reset'].button-clear[disabled]:hover,input[type='submit'].button-clear[disabled]:focus,input[type='submit'].button-clear[disabled]:hover{color:#9b4dca}code{background:#f4f5f6;border-radius:.4rem;font-size:86%;margin:0 .2rem;padding:.2rem .5rem;white-space:nowrap}pre{background:#f4f5f6;border-left:0.3rem solid #9b4dca;overflow-y:hidden}pre>code{border-radius:0;display:block;padding:1rem 1.5rem;white-space:pre}hr{border:0;border-top:0.1rem solid #f4f5f6;margin:3.0rem 0}input[type='color'],input[type='date'],input[type='datetime'],input[type='datetime-local'],input[type='email'],input[type='month'],input[type='number'],input[type='password'],input[type='search'],input[type='tel'],input[type='text'],input[type='url'],input[type='week'],input:not([type]),textarea,select{-webkit-appearance:none;background-color:transparent;border:0.1rem solid #d1d1d1;border-radius:.4rem;box-shadow:none;box-sizing:inherit;height:3.8rem;padding:.6rem 1.0rem .7rem;width:100%}input[type='color']:focus,input[type='date']:focus,input[type='datetime']:focus,input[type='datetime-local']:focus,input[type='email']:focus,input[type='month']:focus,input[type='number']:focus,input[type='password']:focus,input[type='search']:focus,input[type='tel']:focus,input[type='text']:focus,input[type='url']:focus,input[type='week']:focus,input:not([type]):focus,textarea:focus,select:focus{border-color:#9b4dca;outline:0}select{background:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 8\" width=\"30\"><path fill=\"%23d1d1d1\" d=\"M0,0l6,8l6-8\"/></svg>') center right no-repeat;padding-right:3.0rem}select:focus{background-image:url('data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 30 8\" width=\"30\"><path fill=\"%239b4dca\" d=\"M0,0l6,8l6-8\"/></svg>')}select[multiple]{background:none;height:auto}textarea{min-height:6.5rem}label,legend{display:block;font-size:1.6rem;font-weight:700;margin-bottom:.5rem}fieldset{border-width:0;padding:0}input[type='checkbox'],input[type='radio']{display:inline}.label-inline{display:inline-block;font-weight:normal;margin-left:.5rem}.container{margin:0 auto;max-width:112.0rem;padding:0 2.0rem;position:relative;width:100%}.row{display:flex;flex-direction:column;padding:0;width:100%}.row.row-no-padding{padding:0}.row.row-no-padding>.column{padding:0}.row.row-wrap{flex-wrap:wrap}.row.row-top{align-items:flex-start}.row.row-bottom{align-items:flex-end}.row.row-center{align-items:center}.row.row-stretch{align-items:stretch}.row.row-baseline{align-items:baseline}.row .column{display:block;flex:1 1 auto;margin-left:0;max-width:100%;width:100%}.row .column.column-offset-10{margin-left:10%}.row .column.column-offset-20{margin-left:20%}.row .column.column-offset-25{margin-left:25%}.row .column.column-offset-33,.row .column.column-offset-34{margin-left:33.3333%}.row .column.column-offset-40{margin-left:40%}.row .column.column-offset-50{margin-left:50%}.row .column.column-offset-60{margin-left:60%}.row .column.column-offset-66,.row .column.column-offset-67{margin-left:66.6666%}.row .column.column-offset-75{margin-left:75%}.row .column.column-offset-80{margin-left:80%}.row .column.column-offset-90{margin-left:90%}.row .column.column-10{flex:0 0 10%;max-width:10%}.row .column.column-20{flex:0 0 20%;max-width:20%}.row .column.column-25{flex:0 0 25%;max-width:25%}.row .column.column-33,.row .column.column-34{flex:0 0 33.3333%;max-width:33.3333%}.row .column.column-40{flex:0 0 40%;max-width:40%}.row .column.column-50{flex:0 0 50%;max-width:50%}.row .column.column-60{flex:0 0 60%;max-width:60%}.row .column.column-66,.row .column.column-67{flex:0 0 66.6666%;max-width:66.6666%}.row .column.column-75{flex:0 0 75%;max-width:75%}.row .column.column-80{flex:0 0 80%;max-width:80%}.row .column.column-90{flex:0 0 90%;max-width:90%}.row .column .column-top{align-self:flex-start}.row .column .column-bottom{align-self:flex-end}.row .column .column-center{align-self:center}@media (min-width: 40rem){.row{flex-direction:row;margin-left:-1.0rem;width:calc(100% + 2.0rem)}.row .column{margin-bottom:inherit;padding:0 1.0rem}}a{color:#9b4dca;text-decoration:none}a:focus,a:hover{color:#606c76}dl,ol,ul{list-style:none;margin-top:0;padding-left:0}dl dl,dl ol,dl ul,ol dl,ol ol,ol ul,ul dl,ul ol,ul ul{font-size:90%;margin:1.5rem 0 1.5rem 3.0rem}ol{list-style:decimal inside}ul{list-style:circle inside}.button,button,dd,dt,li{margin-bottom:1.0rem}fieldset,input,select,textarea{margin-bottom:1.5rem}blockquote,dl,figure,form,ol,p,pre,table,ul{margin-bottom:2.5rem}table{border-spacing:0;display:block;overflow-x:auto;text-align:left;width:100%}td,th{border-bottom:0.1rem solid #e1e1e1;padding:1.2rem 1.5rem}td:first-child,th:first-child{padding-left:0}td:last-child,th:last-child{padding-right:0}@media (min-width: 40rem){table{display:table;overflow-x:initial}}b,strong{font-weight:bold}p{margin-top:0}h1,h2,h3,h4,h5,h6{font-weight:300;letter-spacing:-.1rem;margin-bottom:2.0rem;margin-top:0}h1{font-size:4.6rem;line-height:1.2}h2{font-size:3.6rem;line-height:1.25}h3{font-size:2.8rem;line-height:1.3}h4{font-size:2.2rem;letter-spacing:-.08rem;line-height:1.35}h5{font-size:1.8rem;letter-spacing:-.05rem;line-height:1.5}h6{font-size:1.6rem;letter-spacing:0;line-height:1.4}img{max-width:100%}.clearfix:after{clear:both;content:' ';display:table}.float-left{float:left}.float-right{float:right}");K('button {\n  background-color: #194577;\n  border: 0.1rem solid #0c78c3;\n  color: #eadb0b;\n}\n\n.flag {\n  padding: 2px;\n}\n\n.flag-border {\n  padding: 1px;\n  border: 1px solid red;\n}\n\n@font-face {\n  font-family: "Star Jedi Outline";\n  src: url("/api/v1/web/nuvolaris/default/faaswars/font/StarJediOutline.woff2") format("woff2"),\n    url("/api/v1/web/nuvolaris/default/faaswars/font/StarJediOutline.woff") format("woff");\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\n@font-face {\n  font-family: "Noto Sans";\n  src: url("/api/v1/web/nuvolaris/default/faaswars/font/NotoSans.woff2") format("woff2"),\n    url("/api/v1/web/nuvolaris/default/faaswars/font/NotoSans.woff") format("woff");\n  font-weight: normal;\n  font-style: normal;\n  font-display: swap;\n}\n\nh1 {\n  font-family: "Star Jedi Outline";\n  color: darkorange;\n}\n\nh2,\nh3,\nh4 {\n  font-family: "Noto Sans";\n  color: darkorange;\n}\n\na {\n  color:orangered;\n}\n\ncanvas {\n  padding: 0;\n  margin: auto;\n  display: block;\n  width: 100%;\n}\n\n@media screen and (min-width: 600px) {\n  .container {\n    padding: 0 2px;\n  }\n\n  .row .column.column-offset {\n    margin-left: 0%;\n  }\n\n  .center {\n    margin: 0;\n  }\n\n  div.center {\n    margin-left: 0;\n  }\n\n  canvas {\n    margin: 0;\n  }\n  h1,\n  a,\n  h3,\n  h4 {\n    text-align: left;\n    margin-left: 0;\n    margin-right: 0;\n  }\n  .row .column.column-left {\n    flex: 0 0 25%;\n    max-width: 50%;\n  }\n  .row .column.column-right {\n    flex: 0 0 25%;\n    max-width: 50%;\n  }\n  .row .column.column-center {\n    flex: 0 0 50%;\n    max-width: 50%;\n  }\n}\n\n@media screen and (min-width: 800px) {\n  .row .column.column-offset {\n    margin-left: 25%;\n  }\n  .center {\n    margin: auto;\n  }\n  div.center {\n    margin-left: auto;\n    margin-right: auto;\n  }\n  canvas {\n    padding: 0;\n    margin: auto;\n    display: block;\n    width: 500px;\n    height: 500px;\n  }\n  h1,\n  a,\n  h3,\n  h4 {\n    text-align: center;\n    margin-left: auto;\n    margin-right: auto;\n  }\n\n  .row .column.column-left {\n    flex: 0 0 25%;\n    max-width: 25%;\n  }\n\n  .row .column.column-right {\n    flex: 0 0 25%;\n    max-width: 25%;\n  }\n\n  .row .column.column-center {\n    flex: 0 0 50%;\n    max-width: 50%;\n  }\n}\n');var Y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var W,X,Z=(function(t,e){var n="undefined"!=typeof self?self:Y,o=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException}return t.prototype=n,new t}();!function(t){!function(e){var n="URLSearchParams"in t,o="Symbol"in t&&"iterator"in Symbol,i="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),r="FormData"in t,a="ArrayBuffer"in t;if(a)var s=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(t){return t&&s.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function c(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return o&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function p(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function f(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=f(e);return e.readAsArrayBuffer(t),n}function g(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:i&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:r&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():a&&i&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=g(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):a&&(ArrayBuffer.prototype.isPrototypeOf(t)||l(t))?this._bodyArrayBuffer=g(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i&&(this.blob=function(){var t=p(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?p(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t,e,n,o=p(this);if(o)return o;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=f(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),o=0;o<e.length;o++)n[o]=String.fromCharCode(e[o]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=u(t),e=c(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},h.prototype.delete=function(t){delete this.map[u(t)]},h.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},h.prototype.set=function(t,e){this.map[u(t)]=c(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),d(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),d(t)},o&&(h.prototype[Symbol.iterator]=h.prototype.entries);var y=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function w(t,e){var n,o,i=(e=e||{}).body;if(t instanceof w){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,i||null==t._bodyInit||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(n=e.method||this.method||"GET",o=n.toUpperCase(),y.indexOf(o)>-1?o:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i)}function v(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),o=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(o),decodeURIComponent(i))}})),e}function x(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}w.prototype.clone=function(){return new w(this,{body:this._bodyInit})},b.call(w.prototype),b.call(x.prototype),x.prototype.clone=function(){return new x(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},x.error=function(){var t=new x(null,{status:0,statusText:""});return t.type="error",t};var _=[301,302,303,307,308];x.redirect=function(t,e){if(-1===_.indexOf(e))throw new RangeError("Invalid status code");return new x(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function k(t,n){return new Promise((function(o,r){var a=new w(t,n);if(a.signal&&a.signal.aborted)return r(new e.DOMException("Aborted","AbortError"));var s=new XMLHttpRequest;function l(){s.abort()}s.onload=function(){var t,e,n={status:s.status,statusText:s.statusText,headers:(t=s.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),o=n.shift().trim();if(o){var i=n.join(":").trim();e.append(o,i)}})),e)};n.url="responseURL"in s?s.responseURL:n.headers.get("X-Request-URL");var i="response"in s?s.response:s.responseText;o(new x(i,n))},s.onerror=function(){r(new TypeError("Network request failed"))},s.ontimeout=function(){r(new TypeError("Network request failed"))},s.onabort=function(){r(new e.DOMException("Aborted","AbortError"))},s.open(a.method,a.url,!0),"include"===a.credentials?s.withCredentials=!0:"omit"===a.credentials&&(s.withCredentials=!1),"responseType"in s&&i&&(s.responseType="blob"),a.headers.forEach((function(t,e){s.setRequestHeader(e,t)})),a.signal&&(a.signal.addEventListener("abort",l),s.onreadystatechange=function(){4===s.readyState&&a.signal.removeEventListener("abort",l)}),s.send(void 0===a._bodyInit?null:a._bodyInit)}))}k.polyfill=!0,t.fetch||(t.fetch=k,t.Headers=h,t.Request=w,t.Response=x),e.Headers=h,e.Request=w,e.Response=x,e.fetch=k,Object.defineProperty(e,"__esModule",{value:!0})}({})}(o),o.fetch.ponyfill=!0,delete o.fetch.polyfill;var i=o;(e=i.fetch).default=i.fetch,e.fetch=i.fetch,e.Headers=i.Headers,e.Request=i.Request,e.Response=i.Response,t.exports=e}(X={path:W,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&X.path)}},X.exports),X.exports);class Q{constructor(t,e,n){this.ext2kind={go:"go:1.12",js:"nodejs:10",py:"python:3"},this.base=t+"/api/v1/namespaces/_/",this.auth="Basic "+btoa(e),this.namespace=n}async authGet(t){let e={method:"GET",headers:{Authorization:this.auth}};return await Z(t,e).then((t=>t.ok?t.text():"ERROR")).catch((t=>"ERROR"))}async call(t,e){let n=t.split(":"),o=this.base+n.pop(),i={method:0==n.length?"GET":n[0],headers:{"Content-Type":"application/json",Authorization:this.auth}};return e&&(i.body=JSON.stringify(e)),await Z(o,i).then((t=>t.ok?t.json():{error:t.statusText,code:t.status})).catch((t=>({error:t,code:"999"})))}async list(){let t=[],e=await this.call("actions");for(let n of e)for(let e of n.annotations)"nimbot"==e.key&&t.push(n.name+"."+e.value);return t}async load(t){let e=t.split(".")[0],n=await this.call("actions/"+e+"?code=true");return"error"in n?n.error:n.exec.code}async del(t){let e=t.split(".")[0];return await this.call("DELETE:actions/"+e)}async save(t,e,n){let[o,i]=t.split("."),r="PUT:actions/"+o+(n?"?overwrite=true":"");return await this.call(r,{namespace:"_",name:o,publish:!0,exec:{kind:this.ext2kind[i],binary:!1,code:e},annotations:[{key:"nimbot",value:i},{key:"web-export",value:!0}]})}}function tt(t){return t*(Math.PI/180)}function et(t,e,n,o){return Math.sqrt(Math.pow(t-n,2)+Math.pow(e-o,2))}function nt(t,e,n,o,i,r){return n+i>t&&t>n&&o+r>e&&e>o}let ot=new class{constructor(){this.requestOn=!1,this.actionOn=!1,this.eventOn=!1,this.statesOn=!1,this.stateInterval=1,this.hitOn=!1}state(t,e,n){this.statesOn&&t%this.stateInterval==0&&console.log(t,e,n)}hit(t,e){this.hitOn&&console.log("*** hit",t,e)}request(...t){this.requestOn&&console.log("request:",...t)}action(...t){this.actionOn&&console.log("action:",...t)}event(...t){this.eventOn&&console.log("event:",...t)}};class it{constructor(t,e,n,o,i,r){this.data={},this.id=0,this.hp=0,this.hp_total=0,this.tank_angle=0,this.turret_angle=0,this.radar_angle=0,this.event_counter=0,this.events=[],this.bullets=[],this.status={wall_collide:!1,is_hit:!1},this.is_hit=!1,this.is_yell=!1,this.is_spot=!1,this.yell_ts=0,this.yell_msg="",this.bullet_ts=0,this.enemy_spot={},this.action_to_collide=0,this.waiting_for_response=!1,this.just_spotted=!1,this.enemies=[],this.inspect=function(){},this.actions=["move_forwards","move_backwards","move_opposide","turn_left","turn_right","turn_turret_left","turn_turret_right","yell","shoot","data"],this.x=t,this.y=e,this.url=n,this.completed_request=i,this.hit_robot=r,this.name=n.split("/").pop(),this.hp_total=5+o,this.hp=this.hp_total}init(t,e,n){this.enemies=t,this.turret_angle=n,this.tank_angle=e}move(t){ot.action(this.id,"move",t);let e=this.x+t*Math.cos(tt(this.tank_angle)),n=this.y+t*Math.sin(tt(this.tank_angle));nt(e,n,15,15,it.battlefield_width-15,it.battlefield_height-15)?(this.status.wall_collide=!1,this.x=e,this.y=n):this.status.wall_collide=!0}turn(t){ot.action(this.id,"turn",t),this.tank_angle+=t,this.tank_angle=this.tank_angle%360,this.tank_angle<0&&(this.tank_angle+=360)}turn_turret(t){ot.action(this.id,"turn_turret",t),this.turret_angle+=t,this.turret_angle=this.turret_angle%360,this.turret_angle<0&&(this.turret_angle+=360)}yell(t){ot.action(this.id,"yell",t),this.is_yell=!0,this.yell_ts=0,this.yell_msg=t}async send(t){let e=JSON.stringify(t,null,2);return++this.event_counter,this.inspect(this.id,this.event_counter,e,void 0),ot.event(this.id,JSON.stringify(t)),this.waiting_for_response=!0,Z(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:e}).then((t=>{if(t.ok)return t.text();throw"Broken Robot Controller"})).then((t=>{this.waiting_for_response=!1;let e=[];for(let n of this.decode(t))n.progress=0,ot.request(this.id,n),e.push(n);return this.events=e,this.completed_request("Round completed.",!0),!0})).catch((t=>(this.waiting_for_response=!1,console.log(t),this.completed_request("ERROR: "+t,!1),!1)))}async send_event(t){return this.send({event:t,energy:this.hp,x:Math.floor(this.me.x),y:Math.floor(this.me.y),angle:Math.floor(this.me.angle),tank_angle:Math.floor(this.me.tank_angle),turret_angle:Math.floor(this.me.turret_angle),enemy_spot:this.enemy_spot,data:this.data})}check_enemy_spot(){this.enemy_spot={};let t=!1;for(let e of this.enemies){let n=(this.tank_angle+this.turret_angle)%360;n=n<0?360+n:n;let o=tt(n),i=Math.atan2(e.y-this.y,e.x-this.x),r=et(this.x,this.y,e.x,e.y),a=Math.atan2(5,r);o>Math.PI&&(o-=2*Math.PI),o<-Math.PI&&(o+=2*Math.PI);let s=i+a;if(o>=i-a&&o<=s){let n=i*(180/Math.PI);n<0&&(n=360+n),this.enemy_spot={id:e.id,x:Math.floor(e.x),y:Math.floor(e.y),angle:Math.floor(n),distance:Math.floor(r),energy:e.hp},t=!0}}return!!t}update_bullet(){let t=-1;for(let e of this.bullets){if(t++,e.x+=3*Math.cos(tt(e.direction)),e.y+=3*Math.sin(tt(e.direction)),!nt(e.x,e.y,2,2,it.battlefield_width-2,it.battlefield_height-2)){e=null,this.bullets.splice(t,1);continue}let n=-1;for(let t of this.enemies){if(n++,et(e.x,e.y,t.x,t.y)<20){t.hp-=1,t.is_hit=!0,this.hit_robot(t.x,t.y),e=null,this.bullets.splice(n,1),ot.hit(t.id,t.state());break}}}}state(){if(this.me){let t=this.me;return`${t.id}: e=${Math.floor(t.hp)} x=${Math.floor(t.x)} y=${Math.floor(t.y)} angle=${Math.floor(t.angle)} tank=${Math.floor(t.tank_angle)} turret=${Math.floor(t.turret_angle)}`}return""}async update(){this.me={angle:(this.tank_angle+this.turret_angle)%360,tank_angle:this.tank_angle,turret_angle:this.turret_angle,id:this.id,x:this.x,y:this.y,hp:this.hp},this.bullet_ts==Number.MAX_VALUE?this.bullet_ts=0:this.bullet_ts++,this.bullets.length>0&&this.update_bullet();let t=!1;for(let e of this.events)switch(e.action){case"shoot":if(this.bullets.length>=5||this.bullet_ts<50)continue;e.progress=1,this.bullet_ts=0;let n={x:this.x,y:this.y,direction:this.tank_angle+this.turret_angle};this.bullets.push(n);continue;case"data":this.data=e.data,e.progress=1;continue;case"yell":0==this.yell_ts&&this.yell(e.msg),e.progress=1;continue;case"turn_turret_left":t||(e.progress++,this.turn_turret(-1),t=!0);continue;case"turn_turret_right":t||(e.progress++,this.turn_turret(1),t=!0);continue}let e=[],n=!1;for(let t of this.events)if(t.progress<t.amount&&(e.push(t),!n))switch(t.action){case"move_forwards":t.progress++,this.move(1),this.status.wall_collide&&(this.action_to_collide=1),n=!0;break;case"move_backwards":t.progress++,this.move(-1),this.status.wall_collide&&(this.action_to_collide=-1),n=!0;break;case"move_opposide":t.progress++,this.move(-this.action_to_collide),this.status.wall_collide&&(this.action_to_collide=-this.action_to_collide),n=!0;break;case"turn_left":t.progress++,this.turn(-1),n=!0;break;case"turn_right":t.progress++,this.turn(1),n=!0}if(this.events=e,!this.is_spot&&this.check_enemy_spot()&&(this.is_spot=!0),!this.waiting_for_response){if(this.is_spot&&!this.just_spotted)return this.is_spot=!1,this.just_spotted=!0,this.send_event("enemy-spot");if(this.is_hit)return this.status.is_hit=!0,this.events=[],this.send_event("hit").then((t=>(this.is_hit=!1,this.just_spotted=!1,t)));if(this.status.wall_collide)return this.events=[],this.send_event("wall-collide").then((t=>(this.just_spotted=!1,t)));if(0==this.events.length)return this.send_event("idle").then((t=>(this.just_spotted=!1,t)))}return!0}checkEvent(t){for(let e in t)if(-1==this.actions.indexOf(e))return"ERROR! '"+e+"' ???";return""}decode(t){let e,n=JSON.parse(t);this.inspect(this.id,this.event_counter,void 0,JSON.stringify(n,null,2));let o=[];e="object"==typeof n?Array.isArray(n)?n:[n]:[];for(let t of e){if("action"in t){o.push(t);continue}let e=this.checkEvent(t);""!=e&&(o.push({action:"yell",msg:e,amount:1}),console.log(e)),"data"in t&&o.push({action:"data",data:t.data,amount:1}),"yell"in t&&o.push({action:"yell",msg:t.yell,amount:1}),"shoot"in t&&t.shoot&&o.push({action:"shoot",amount:1}),"turn_turret_right"in t?o.push({action:"turn_turret_right",amount:t.turn_turret_right}):"turn_turret_left"in t&&o.push({action:"turn_turret_left",amount:t.turn_turret_left}),"move_opposide"in t?o.push({action:"move_opposide",amount:t.move_opposide}):"move_forwards"in t?(o.push({action:"move_forwards",amount:t.move_forwards}),delete t.move_forwards):"move_backwards"in t?(o.push({action:"move_backwards",amount:t.move_backwards}),delete t.move_backwards):"turn_left"in t?(o.push({action:"turn_left",amount:t.turn_left}),delete t.turn_left):"turn_right"in t&&o.push({action:"turn_right",amount:t.turn_right})}return o}}it.battlefield_width=0,it.battlefield_height=0;class rt{constructor(t,e,n,o){this.suspended=!0,this.tracing=!0,this.timeout=0,this.duration=-1,this.title="",it.battlefield_height=e,it.battlefield_width=t,this.width=t,this.height=e,this.end_battle=n,this.suspend_battle=o,rt.battle=this}init(t,e,n,o){this.duration=n,this.title=t[0].split("/").pop()+" vs "+t[1].split("/").pop();let i=this.height/2,r=this.width/3,a=r,s=0;rt.robots=[];for(let e of t){let t=new it(a,i,e,o[s],((t,e)=>{this.completed_request(t,e)}),((t,e)=>{this.hit_robot(t,e)}));t.id=s++,rt.robots.push(t),a+=r,s>=2&&(a=Math.random()*(this.width-100+20))}let l=0;for(let t of rt.robots){let n=[];for(let e of rt.robots)e.id!=t.id&&n.push(e);t.init(n,e[l][0],e[l][1]),l++}}robotState(t){return 2!=rt.robots.length?"":rt.robots[t].state()}robotName(t){return 2!=rt.robots.length?"":rt.robots[t].name}completed_request(t,e){e||(this.suspended=!0,this.suspend_battle(t,this.robotState(0),this.robotState(1)))}hit_robot(t,e){rt.explosions.push({x:t,y:e,progress:1})}async loop(){for(let t of rt.robots)t.update().then((e=>{e||(this.stop(),this.end_battle(0==t.id?1:0))}));if(this.draw(),ot.state(this.duration,this.robotState(0),this.robotState(1)),this.duration--,0==this.duration)return this.end_battle(-1),void this.stop();0==rt.explosions.length&&rt.robots.length<=1&&(0==rt.robots.length?this.end_battle(-1):this.end_battle(rt.robots[0].id),this.stop()),this.tracing?this.suspend_battle("Tracing... (suspended)",this.robotState(0),this.robotState(1)):this.suspended||(this.timeout=setTimeout((()=>this.loop()),rt.speed))}draw(){let t=[];for(let e of rt.robots)e.hp>0&&t.push(e);rt.robots=t;for(let t of rt.explosions){let t=rt.explosions.pop();t.progress<=17&&(t.progress+=1,rt.explosions.unshift(t))}}stop(){this.suspended=!0,clearTimeout(this.timeout)}terminate(){this.stop(),this.end_battle(-2)}start(){return this.suspended=!1,this.tracing=!1,this.loop(),this.title}trace(){return this.suspended=!0,this.tracing=!0,this.loop(),this.title}}rt.robots=[],rt.explosions=[],rt.speed=10;const at=[];function st(e,n=t){let o;const i=[];function a(t){if(r(e,t)&&(e=t,o)){const t=!at.length;for(let t=0;t<i.length;t+=1){const n=i[t];n[1](),at.push(n,e)}if(t){for(let t=0;t<at.length;t+=2)at[t][0](at[t+1]);at.length=0}}}return{set:a,update:function(t){a(t(e))},subscribe:function(r,s=t){const l=[r,s];return i.push(l),1===i.length&&(o=n(a)||t),r(e),()=>{const t=i.indexOf(l);-1!==t&&i.splice(t,1),0===i.length&&(o(),o=null)}}}}const lt=st([{n:0,req:"",res:"",state:""},{n:0,req:"",res:"",state:""}]),ut=st(""),ct=st(""),dt=st(0);class ht{constructor(t){this.assets={},this.loaded=0,this.total=0,this.sources=t}get(t){return this.assets[t]}loadAll(t){for(let t in this.sources)this.assets[t]=new Image,this.assets[t].src=this.sources[t],++this.total;for(let e in this.assets)this.assets[e].onload=()=>{++this.loaded,this.total==this.loaded&&t()}}}let pt=new ht({splash:"img/splash.png",background:"img/background.png",body:"img/body.png","body-red":"img/body-red.png",turret:"img/turret.png","turret-red":"img/turret-red.png","explosion1-1":"img/explosion/explosion1-1.png","explosion1-2":"img/explosion/explosion1-2.png","explosion1-3":"img/explosion/explosion1-3.png","explosion1-4":"img/explosion/explosion1-4.png","explosion1-5":"img/explosion/explosion1-5.png","explosion1-6":"img/explosion/explosion1-6.png","explosion1-7":"img/explosion/explosion1-7.png","explosion1-8":"img/explosion/explosion1-8.png","explosion1-9":"img/explosion/explosion1-9.png","explosion1-10":"img/explosion/explosion1-10.png","explosion1-11":"img/explosion/explosion1-11.png","explosion1-12":"img/explosion/explosion1-12.png","explosion1-13":"img/explosion/explosion1-13.png","explosion1-14":"img/explosion/explosion1-14.png","explosion1-15":"img/explosion/explosion1-15.png","explosion1-16":"img/explosion/explosion1-16.png","explosion1-17":"img/explosion/explosion1-17.png"});function ft(t,e,n,o){lt.update((i=>(void 0!==e&&(i[t].n=e),void 0!==n&&(i[t].req=n),void 0!==o&&(i[t].res=o),i)))}class mt extends rt{constructor(t,e,n,o){super(t,e,n,o),pt.loadAll((()=>{}))}webinit(t,e,n,o){this.ctx=t,this.init(e,n,-1,o);for(let t of rt.robots)t.inspect=ft}draw(){this.ctx.drawImage(pt.get("background"),0,0,this.width,this.height);let t=[];for(let e of rt.robots){let n=0==e.id?"body":"body-red",o=0==e.id?"turret":"turret-red";if(e.hp<=0){rt.explosions.push({x:e.x,y:e.y,progress:1});continue}t.push(e),this.ctx.save(),this.ctx.translate(e.x,e.y),this.ctx.textAlign="left",this.ctx.textBaseline="top";let i=20,r=20;this.width-e.x<100&&(i=-i,this.ctx.textAlign="right"),this.height-e.y<100&&(r=-r);let a=`${e.hp}/${e.hp_total}`;if(e.is_yell&&e.yell_ts<50?(this.ctx.font="18px Verdana",a=e.yell_msg,e.yell_ts++):(this.ctx.font="14px Courier",e.yell_ts=0,e.is_yell=!1),this.ctx.fillStyle="#FFFFFF",this.ctx.fillText(a,i,r),this.ctx.rotate(tt(e.tank_angle)),this.ctx.drawImage(pt.get(n),-25,-25,50,50),this.ctx.rotate(tt(e.turret_angle)),this.ctx.drawImage(pt.get(o),-25,-12.5,50,25),this.ctx.rotate(tt(e.radar_angle)),this.ctx.restore(),e.bullets.length>0)for(let t of e.bullets)this.ctx.save(),this.ctx.translate(t.x,t.y),this.ctx.rotate(tt(t.direction)),this.ctx.fillStyle="#FFFFFF",this.ctx.fillRect(-3,-3,6,6),this.ctx.restore()}rt.robots=t;for(let t of rt.explosions){let t=rt.explosions.pop();t.progress<=17&&(this.ctx.drawImage(pt.get("explosion1-"+t.progress),t.x-64,t.y-64,128,128),t.progress+=1,rt.explosions.unshift(t))}}}let gt=[["ðŸ‡¦ðŸ‡©","ðŸ‡¦ðŸ‡ª","ðŸ‡¦ðŸ‡«","ðŸ‡¦ðŸ‡¬","ðŸ‡¦ðŸ‡®","ðŸ‡¦ðŸ‡±","ðŸ‡¦ðŸ‡²","ðŸ‡¦ðŸ‡´","ðŸ‡¦ðŸ‡¶","ðŸ‡¦ðŸ‡·","ðŸ‡¦ðŸ‡¸","ðŸ‡¦ðŸ‡¹","ðŸ‡¦ðŸ‡º","ðŸ‡¦ðŸ‡¼","ðŸ‡¦ðŸ‡½","ðŸ‡¦ðŸ‡¿","ðŸ‡§ðŸ‡¦","ðŸ‡§ðŸ‡§","ðŸ‡§ðŸ‡©","ðŸ‡§ðŸ‡ª","ðŸ‡§ðŸ‡«","ðŸ‡§ðŸ‡¬","ðŸ‡§ðŸ‡­","ðŸ‡§ðŸ‡®","ðŸ‡§ðŸ‡¯"],["ðŸ‡§ðŸ‡±","ðŸ‡§ðŸ‡²","ðŸ‡§ðŸ‡³","ðŸ‡§ðŸ‡´","ðŸ‡§ðŸ‡¶","ðŸ‡§ðŸ‡·","ðŸ‡§ðŸ‡¸","ðŸ‡§ðŸ‡¹","ðŸ‡§ðŸ‡»","ðŸ‡§ðŸ‡¼","ðŸ‡§ðŸ‡¾","ðŸ‡§ðŸ‡¿","ðŸ‡¨ðŸ‡¦","ðŸ‡¨ðŸ‡¨","ðŸ‡¨ðŸ‡©","ðŸ‡¨ðŸ‡«","ðŸ‡¨ðŸ‡¬","ðŸ‡¨ðŸ‡­","ðŸ‡¨ðŸ‡®","ðŸ‡¨ðŸ‡°","ðŸ‡¨ðŸ‡±","ðŸ‡¨ðŸ‡²","ðŸ‡¨ðŸ‡³","ðŸ‡¨ðŸ‡´","ðŸ‡¨ðŸ‡·"],["ðŸ‡¨ðŸ‡º","ðŸ‡¨ðŸ‡»","ðŸ‡¨ðŸ‡¼","ðŸ‡¨ðŸ‡½","ðŸ‡¨ðŸ‡¾","ðŸ‡¨ðŸ‡¿","ðŸ‡©ðŸ‡ª","ðŸ‡©ðŸ‡¯","ðŸ‡©ðŸ‡°","ðŸ‡©ðŸ‡²","ðŸ‡©ðŸ‡´","ðŸ‡©ðŸ‡¿","ðŸ‡ªðŸ‡¨","ðŸ‡ªðŸ‡ª","ðŸ‡ªðŸ‡¬","ðŸ‡ªðŸ‡­","ðŸ‡ªðŸ‡·","ðŸ‡ªðŸ‡¸","ðŸ‡ªðŸ‡¹","ðŸ‡«ðŸ‡®","ðŸ‡«ðŸ‡¯","ðŸ‡«ðŸ‡°","ðŸ‡«ðŸ‡²","ðŸ‡«ðŸ‡´","ðŸ‡«ðŸ‡·"],["ðŸ‡¬ðŸ‡¦","ðŸ‡¬ðŸ‡§","ðŸ‡¬ðŸ‡©","ðŸ‡¬ðŸ‡ª","ðŸ‡¬ðŸ‡«","ðŸ‡¬ðŸ‡¬","ðŸ‡¬ðŸ‡­","ðŸ‡¬ðŸ‡®","ðŸ‡¬ðŸ‡±","ðŸ‡¬ðŸ‡²","ðŸ‡¬ðŸ‡³","ðŸ‡¬ðŸ‡µ","ðŸ‡¬ðŸ‡¶","ðŸ‡¬ðŸ‡·","ðŸ‡¬ðŸ‡¸","ðŸ‡¬ðŸ‡¹","ðŸ‡¬ðŸ‡º","ðŸ‡¬ðŸ‡¼","ðŸ‡¬ðŸ‡¾","ðŸ‡­ðŸ‡°","ðŸ‡­ðŸ‡²","ðŸ‡­ðŸ‡³","ðŸ‡­ðŸ‡·","ðŸ‡­ðŸ‡¹","ðŸ‡­ðŸ‡º"],["ðŸ‡®ðŸ‡©","ðŸ‡®ðŸ‡ª","ðŸ‡®ðŸ‡±","ðŸ‡®ðŸ‡²","ðŸ‡®ðŸ‡³","ðŸ‡®ðŸ‡´","ðŸ‡®ðŸ‡¶","ðŸ‡®ðŸ‡·","ðŸ‡®ðŸ‡¸","ðŸ‡®ðŸ‡¹","ðŸ‡¯ðŸ‡ª","ðŸ‡¯ðŸ‡²","ðŸ‡¯ðŸ‡´","ðŸ‡¯ðŸ‡µ","ðŸ‡°ðŸ‡ª","ðŸ‡°ðŸ‡¬","ðŸ‡°ðŸ‡­","ðŸ‡°ðŸ‡®","ðŸ‡°ðŸ‡²","ðŸ‡°ðŸ‡³","ðŸ‡°ðŸ‡µ","ðŸ‡°ðŸ‡·","ðŸ‡°ðŸ‡¼","ðŸ‡°ðŸ‡¾","ðŸ‡°ðŸ‡¿"],["ðŸ‡±ðŸ‡¦","ðŸ‡±ðŸ‡§","ðŸ‡±ðŸ‡¨","ðŸ‡±ðŸ‡®","ðŸ‡±ðŸ‡°","ðŸ‡±ðŸ‡·","ðŸ‡±ðŸ‡¸","ðŸ‡±ðŸ‡¹","ðŸ‡±ðŸ‡º","ðŸ‡±ðŸ‡»","ðŸ‡±ðŸ‡¾","ðŸ‡²ðŸ‡¦","ðŸ‡²ðŸ‡¨","ðŸ‡²ðŸ‡©","ðŸ‡²ðŸ‡ª","ðŸ‡²ðŸ‡«","ðŸ‡²ðŸ‡¬","ðŸ‡²ðŸ‡­","ðŸ‡²ðŸ‡°","ðŸ‡²ðŸ‡±","ðŸ‡²ðŸ‡²","ðŸ‡²ðŸ‡³","ðŸ‡²ðŸ‡´","ðŸ‡²ðŸ‡µ","ðŸ‡²ðŸ‡¶"],["ðŸ‡²ðŸ‡·","ðŸ‡²ðŸ‡¸","ðŸ‡²ðŸ‡¹","ðŸ‡²ðŸ‡º","ðŸ‡²ðŸ‡»","ðŸ‡²ðŸ‡¼","ðŸ‡²ðŸ‡½","ðŸ‡²ðŸ‡¾","ðŸ‡²ðŸ‡¿","ðŸ‡³ðŸ‡¦","ðŸ‡³ðŸ‡¨","ðŸ‡³ðŸ‡ª","ðŸ‡³ðŸ‡«","ðŸ‡³ðŸ‡¬","ðŸ‡³ðŸ‡®","ðŸ‡³ðŸ‡±","ðŸ‡³ðŸ‡´","ðŸ‡³ðŸ‡µ","ðŸ‡³ðŸ‡·","ðŸ‡³ðŸ‡º","ðŸ‡³ðŸ‡¿","ðŸ‡´ðŸ‡²","ðŸ‡µðŸ‡¦","ðŸ‡µðŸ‡ª","ðŸ‡µðŸ‡«"],["ðŸ‡µðŸ‡¬","ðŸ‡µðŸ‡­","ðŸ‡µðŸ‡°","ðŸ‡µðŸ‡±","ðŸ‡µðŸ‡²","ðŸ‡µðŸ‡³","ðŸ‡µðŸ‡·","ðŸ‡µðŸ‡¸","ðŸ‡µðŸ‡¹","ðŸ‡µðŸ‡¼","ðŸ‡µðŸ‡¾","ðŸ‡¶ðŸ‡¦","ðŸ‡·ðŸ‡ª","ðŸ‡·ðŸ‡´","ðŸ‡·ðŸ‡¸","ðŸ‡·ðŸ‡º","ðŸ‡·ðŸ‡¼","ðŸ‡¸ðŸ‡¦","ðŸ‡¸ðŸ‡§","ðŸ‡¸ðŸ‡¨","ðŸ‡¸ðŸ‡©","ðŸ‡¸ðŸ‡ª","ðŸ‡¸ðŸ‡¬","ðŸ‡¸ðŸ‡­","ðŸ‡¸ðŸ‡®"],["ðŸ‡¸ðŸ‡¯","ðŸ‡¸ðŸ‡°","ðŸ‡¸ðŸ‡±","ðŸ‡¸ðŸ‡²","ðŸ‡¸ðŸ‡³","ðŸ‡¸ðŸ‡´","ðŸ‡¸ðŸ‡·","ðŸ‡¸ðŸ‡¸","ðŸ‡¸ðŸ‡¹","ðŸ‡¸ðŸ‡»","ðŸ‡¸ðŸ‡½","ðŸ‡¸ðŸ‡¾","ðŸ‡¸ðŸ‡¿","ðŸ‡¹ðŸ‡¨","ðŸ‡¹ðŸ‡©","ðŸ‡¹ðŸ‡«","ðŸ‡¹ðŸ‡¬","ðŸ‡¹ðŸ‡­","ðŸ‡¹ðŸ‡¯","ðŸ‡¹ðŸ‡°","ðŸ‡¹ðŸ‡±","ðŸ‡¹ðŸ‡²","ðŸ‡¹ðŸ‡³","ðŸ‡¹ðŸ‡´","ðŸ‡¹ðŸ‡·"],["ðŸ‡¹ðŸ‡¹","ðŸ‡¹ðŸ‡»","ðŸ‡¹ðŸ‡¼","ðŸ‡¹ðŸ‡¿","ðŸ‡ºðŸ‡¦","ðŸ‡ºðŸ‡¬","ðŸ‡ºðŸ‡²","ðŸ‡ºðŸ‡¸","ðŸ‡ºðŸ‡¾","ðŸ‡ºðŸ‡¿","ðŸ‡»ðŸ‡¦","ðŸ‡»ðŸ‡¨","ðŸ‡»ðŸ‡ª","ðŸ‡»ðŸ‡¬","ðŸ‡»ðŸ‡®","ðŸ‡»ðŸ‡³","ðŸ‡»ðŸ‡º","ðŸ‡¼ðŸ‡«","ðŸ‡¼ðŸ‡¸","ðŸ‡¾ðŸ‡ª","ðŸ‡¾ðŸ‡¹","ðŸ‡¿ðŸ‡¦","ðŸ‡¿ðŸ‡²","ðŸ‡¿ðŸ‡¼"]],bt=["Andorra","United Arab Emirates","Afghanistan","Antigua and Barbuda","Anguilla","Albania","Armenia","Angola","Antarctica","Argentina","American Samoa","Austria","Australia","Aruba","Ã…land Islands","Azerbaijan","Bosnia and Herzegovina","Barbados","Bangladesh","Belgium","Burkina Faso","Bulgaria","Bahrain","Burundi","Benin","Saint BarthÃ©lemy","Bermuda","Brunei Darussalam","Bolivia","Bonaire, Sint Eustatius and Saba","Brazil","Bahamas","Bhutan","Bouvet Island","Botswana","Belarus","Belize","Canada","Cocos (Keeling) Islands","Congo","Central African Republic","Congo","Switzerland","CÃ´te D'Ivoire","Cook Islands","Chile","Cameroon","China","Colombia","Costa Rica","Cuba","Cape Verde","CuraÃ§ao","Christmas Island","Cyprus","Czech Republic","Germany","Djibouti","Denmark","Dominica","Dominican Republic","Algeria","Ecuador","Estonia","Egypt","Western Sahara","Eritrea","Spain","Ethiopia","Finland","Fiji","Falkland Islands (Malvinas)","Micronesia","Faroe Islands","France","Gabon","United Kingdom","Grenada","Georgia","French Guiana","Guernsey","Ghana","Gibraltar","Greenland","Gambia","Guinea","Guadeloupe","Equatorial Guinea","Greece","South Georgia","Guatemala","Guam","Guinea-Bissau","Guyana","Hong Kong","Heard Island and Mcdonald Islands","Honduras","Croatia","Haiti","Hungary","Indonesia","Ireland","Israel","Isle of Man","India","British Indian Ocean Territory","Iraq","Iran","Iceland","Italy","Jersey","Jamaica","Jordan","Japan","Kenya","Kyrgyzstan","Cambodia","Kiribati","Comoros","Saint Kitts and Nevis","North Korea","South Korea","Kuwait","Cayman Islands","Kazakhstan","Lao People's Democratic Republic","Lebanon","Saint Lucia","Liechtenstein","Sri Lanka","Liberia","Lesotho","Lithuania","Luxembourg","Latvia","Libya","Morocco","Monaco","Moldova","Montenegro","Saint Martin (French Part)","Madagascar","Marshall Islands","Macedonia","Mali","Myanmar","Mongolia","Macao","Northern Mariana Islands","Martinique","Mauritania","Montserrat","Malta","Mauritius","Maldives","Malawi","Mexico","Malaysia","Mozambique","Namibia","New Caledonia","Niger","Norfolk Island","Nigeria","Nicaragua","Netherlands","Norway","Nepal","Nauru","Niue","New Zealand","Oman","Panama","Peru","French Polynesia","Papua New Guinea","Philippines","Pakistan","Poland","Saint Pierre and Miquelon","Pitcairn","Puerto Rico","Palestinian Territory","Portugal","Palau","Paraguay","Qatar","RÃ©union","Romania","Serbia","Russia","Rwanda","Saudi Arabia","Solomon Islands","Seychelles","Sudan","Sweden","Singapore","Saint Helena, Ascension and Tristan Da Cunha","Slovenia","Svalbard and Jan Mayen","Slovakia","Sierra Leone","San Marino","Senegal","Somalia","Suriname","South Sudan","Sao Tome and Principe","El Salvador","Sint Maarten (Dutch Part)","Syrian Arab Republic","Swaziland","Turks and Caicos Islands","Chad","French Southern Territories","Togo","Thailand","Tajikistan","Tokelau","Timor-Leste","Turkmenistan","Tunisia","Tonga","Turkey","Trinidad and Tobago","Tuvalu","Taiwan","Tanzania","Ukraine","Uganda","United States Minor Outlying Islands","United States","Uruguay","Uzbekistan","Vatican City","Saint Vincent and The Grenadines","Venezuela","Virgin Islands, British","Virgin Islands, U.S.","Viet Nam","Vanuatu","Wallis and Futuna","Samoa","Yemen","Mayotte","South Africa","Zambia","Zimbabwe"];function yt(t,e,n){const o=t.slice();return o[13]=e[n],o[15]=n,o}function wt(e){let n,o,i,r,a=e[13]+"";return{c(){n=d("option"),o=h(a),i=p(),n.__value=r=Math.floor(e[15]/25)+":"+e[15]%25,n.value=n.__value},m(t,e){l(t,n,e),s(n,o),s(n,i)},p:t,d(t){t&&u(n)}}}function vt(e){let n,i,r,a,f,y,w,x,_,k,S,E,C,A,T,q,M,$,I=bt,R=[];for(let t=0;t<I.length;t+=1)R[t]=wt(yt(e,I,t));return{c(){n=d("div"),i=d("h3"),r=h(e[2]),a=p(),f=d("div"),y=d("div"),w=d("select"),x=d("option"),x.textContent="- Select -";for(let t=0;t<R.length;t+=1)R[t].c();_=p(),k=d("div"),S=d("button"),E=h("Submit"),C=h("\n    Â \n    "),A=d("button"),A.textContent="Back",T=p(),q=d("div"),q.innerHTML='<div class="column column-center column-offset"><h4>You can submit up to 5 fighters. Use a different name for each fighter.</h4></div>',g(n,"class","row"),x.__value="25:0",x.value=x.__value,void 0===e[1]&&O((()=>e[10].call(w))),g(y,"class","column column-20 column-offset"),S.disabled=e[0],g(f,"class","row"),g(q,"class","row")},m(t,o){l(t,n,o),s(n,i),s(i,r),l(t,a,o),l(t,f,o),s(f,y),s(y,w),s(w,x);for(let t=0;t<R.length;t+=1)R[t].m(w,null);v(w,e[1]),s(f,_),s(f,k),s(k,S),s(S,E),s(k,C),s(k,A),l(t,T,o),l(t,q,o),M||($=[m(w,"change",e[10]),m(S,"click",e[3]),m(A,"click",e[11])],M=!0)},p(t,[e]){if(4&e&&b(r,t[2]),0&e){let n;for(I=bt,n=0;n<I.length;n+=1){const o=yt(t,I,n);R[n]?R[n].p(o,e):(R[n]=wt(o),R[n].c(),R[n].m(w,null))}for(;n<R.length;n+=1)R[n].d(1);R.length=I.length}2&e&&v(w,t[1]),1&e&&(S.disabled=t[0])},i:t,o:t,d(t){t&&u(n),t&&u(a),t&&u(f),c(R,t),t&&u(T),t&&u(q),M=!1,o($)}}}function xt(t,e,n){let o;a(t,ct,(t=>n(9,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((o=o.apply(t,e||[])).next())}))};let{ow:r}=e,s="",l=!0,u="25:0",c=25,d=0,h="",p=0;return t.$$set=t=>{"ow"in t&&n(4,r=t.ow)},t.$$.update=()=>{995&t.$$.dirty&&(n(5,c=parseInt(u.split(":")[0])),n(6,d=parseInt(u.split(":")[1])),n(7,h=c<25?gt[c][d]:""),n(0,l=""==h),n(2,s=l?"Select your country.":`Please confirm submitting ${h} ${o}`),n(8,p=25*c+d))},[l,u,s,function(){return i(this,void 0,void 0,(function*(){let t=r.namespace,e=(t.split("-")[0],o.split(".").slice(0,-1).join(".")),i=p+":default/"+e;if(confirm("Are you sure you want to submit your fighter?")){r.namespace;(function(t,e){let n={namespace:t,data:e};return Z("https://apigcp.nimbella.io/api/v1/web/nuvolaris/rumble/submit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>t.json())).catch((t=>({message:t})))})(t,i).then((t=>{n(2,s=t.message||"Cannot submit your fighter. Please report in the community.")}))}}))},r,c,d,h,p,o,function(){u=x(this),n(1,u)},()=>{ct.set("")}]}class _t extends V{constructor(t){super(),J(this,t,xt,vt,r,{ow:4})}}function kt(t,e,n){const o=t.slice();return o[57]=e[n],o}function St(t,e,n){const o=t.slice();return o[62]=e[n],o}function Et(t,e,n){const o=t.slice();return o[57]=e[n],o}function Ct(t){let e,n;return{c(){e=d("h1"),n=h(t[3])},m(t,o){l(t,e,o),s(e,n)},p(t,e){8&e[0]&&b(n,t[3])},d(t){t&&u(e)}}}function At(e){let n,o;return{c(){n=d("img"),w(n,"padding-bottom","20px"),g(n,"alt","banner"),g(n,"width","500"),g(n,"class","center"),n.src!==(o="img/banner.png")&&g(n,"src","img/banner.png")},m(t,e){l(t,n,e)},p:t,d(t){t&&u(n)}}}function Tt(e){let n,i,r,a,c,y,w,v,x,_,k,S,E,C,A,T,q,M,O,$,I,R,B,P,F,z,j,N,L,D,U,G,H,J,V,K,Y,W,X,Z,Q,tt,et=e[2].robotName(0)+"",nt=e[2].robotName(1)+"";function ot(t,e){return t[10]?$t:Ot}let it=ot(e),rt=it(e),at=e[6]&&It(e);return{c(){n=d("div"),i=d("h3"),r=h(e[4]),a=p(),c=d("div"),y=d("h1"),w=d("span"),v=h(et),x=h(" vs\n          "),_=d("span"),k=h(nt),S=p(),E=d("div"),C=d("div"),A=d("br"),T=p(),q=d("button"),rt.c(),M=p(),O=d("br"),$=p(),I=d("button"),I.textContent="Stop",R=d("br"),B=p(),P=d("button"),F=h("Edit"),j=p(),N=d("div"),L=d("br"),D=p(),U=d("label"),G=d("input"),H=h("\n            Debug"),J=d("br"),V=p(),K=d("a"),K.textContent="Logs",Y=p(),W=d("br"),X=p(),at&&at.c(),Z=f(),g(n,"class","row"),g(w,"id","yellow"),g(w,"class","svelte-1fcsikx"),g(_,"id","red"),g(_,"class","svelte-1fcsikx"),g(c,"class","row"),g(q,"id","fight"),g(P,"id","edit"),P.disabled=z=0==e[13].length,g(C,"class","column column-left column-offset"),g(G,"type","checkbox"),g(K,"href","https://apigcp.nimbella.io/wb/?command=activation+list"),g(K,"target","workbench"),g(N,"class","column column-right"),g(E,"class","row")},m(t,o){l(t,n,o),s(n,i),s(i,r),l(t,a,o),l(t,c,o),s(c,y),s(y,w),s(w,v),s(y,x),s(y,_),s(_,k),l(t,S,o),l(t,E,o),s(E,C),s(C,A),s(C,T),s(C,q),rt.m(q,null),s(C,M),s(C,O),s(C,$),s(C,I),s(C,R),s(C,B),s(C,P),s(P,F),s(E,j),s(E,N),s(N,L),s(N,D),s(N,U),s(U,G),G.checked=e[6],s(U,H),s(U,J),s(U,V),s(U,K),s(U,Y),s(N,W),l(t,X,o),at&&at.m(t,o),l(t,Z,o),Q||(tt=[m(q,"click",e[28]),m(I,"click",e[39]),m(P,"click",e[26]),m(G,"change",e[40])],Q=!0)},p(t,e){16&e[0]&&b(r,t[4]),4&e[0]&&et!==(et=t[2].robotName(0)+"")&&b(v,et),4&e[0]&&nt!==(nt=t[2].robotName(1)+"")&&b(k,nt),it!==(it=ot(t))&&(rt.d(1),rt=it(t),rt&&(rt.c(),rt.m(q,null))),8192&e[0]&&z!==(z=0==t[13].length)&&(P.disabled=z),64&e[0]&&(G.checked=t[6]),t[6]?at?at.p(t,e):(at=It(t),at.c(),at.m(Z.parentNode,Z)):at&&(at.d(1),at=null)},i:t,o:t,d(t){t&&u(n),t&&u(a),t&&u(c),t&&u(S),t&&u(E),rt.d(),t&&u(X),at&&at.d(t),t&&u(Z),Q=!1,o(tt)}}}function qt(e){let n,i,r,a,b,w,x,_,k,S,E,C,A,T,q,M,$,I,R,B,P,F,z,j,N,L,D,U,G,H,J,V;function K(t,e){return 0==t[13].length?Bt:Rt}let Y=K(e),W=Y(e),X=e[18],Z=[];for(let t=0;t<X.length;t+=1)Z[t]=zt(kt(e,X,t));function Q(t,e){return void 0===t[0]?Nt:jt}let tt=Q(e),et=tt(e);function nt(t,e){return void 0===t[0]?Dt:Lt}let ot=nt(e),it=ot(e);return{c(){n=d("div"),n.innerHTML="<h3>Make Your Choice</h3>",i=p(),r=d("div"),a=d("div"),b=d("label"),w=h("Filter Yellow Fighters: "),x=d("input"),_=p(),k=d("label"),k.textContent="Yellow Fighter (You)",S=p(),E=d("select"),W.c(),C=p(),A=d("div"),T=d("label"),q=h("Filter Red Fighters: "),M=d("input"),$=p(),I=d("label"),I.textContent="Red Fighter (Enemy)",R=p(),B=d("select");for(let t=0;t<Z.length;t+=1)Z[t].c();P=p(),F=d("div"),z=d("div"),et.c(),j=p(),N=d("div"),L=d("button"),D=h("Start the Battle"),G=p(),it.c(),H=f(),g(n,"class","row"),g(k,"for","mybot"),g(E,"id","enemy"),void 0===e[8]&&O((()=>e[33].call(E))),g(a,"class","column column-left column-offset"),g(I,"for","enemy"),g(B,"id","enemy"),void 0===e[9]&&O((()=>e[35].call(B))),g(A,"class","column column-right"),g(r,"class","row"),g(z,"class","column column-left column-offset"),g(L,"id","done"),L.disabled=U=!Gt,g(N,"class","column column-right"),g(F,"class","row")},m(t,o){l(t,n,o),l(t,i,o),l(t,r,o),s(r,a),s(a,b),s(b,w),s(b,x),y(x,e[14]),s(a,_),s(a,k),s(a,S),s(a,E),W.m(E,null),v(E,e[8]),s(r,C),s(r,A),s(A,T),s(T,q),s(T,M),y(M,e[15]),s(A,$),s(A,I),s(A,R),s(A,B);for(let t=0;t<Z.length;t+=1)Z[t].m(B,null);v(B,e[9]),l(t,P,o),l(t,F,o),s(F,z),et.m(z,null),s(F,j),s(F,N),s(N,L),s(L,D),l(t,G,o),it.m(t,o),l(t,H,o),J||(V=[m(x,"input",e[32]),m(x,"input",e[24]),m(E,"change",e[33]),m(M,"input",e[34]),m(M,"input",e[24]),m(B,"change",e[35]),m(L,"click",e[27])],J=!0)},p(t,e){if(16384&e[0]&&x.value!==t[14]&&y(x,t[14]),Y===(Y=K(t))&&W?W.p(t,e):(W.d(1),W=Y(t),W&&(W.c(),W.m(E,null))),196864&e[0]&&v(E,t[8]),32768&e[0]&&M.value!==t[15]&&y(M,t[15]),262144&e[0]){let n;for(X=t[18],n=0;n<X.length;n+=1){const o=kt(t,X,n);Z[n]?Z[n].p(o,e):(Z[n]=zt(o),Z[n].c(),Z[n].m(B,null))}for(;n<Z.length;n+=1)Z[n].d(1);Z.length=X.length}262656&e[0]&&v(B,t[9]),tt===(tt=Q(t))&&et?et.p(t,e):(et.d(1),et=tt(t),et&&(et.c(),et.m(z,null))),ot===(ot=nt(t))&&it?it.p(t,e):(it.d(1),it=ot(t),it&&(it.c(),it.m(H.parentNode,H)))},i:t,o:t,d(t){t&&u(n),t&&u(i),t&&u(r),W.d(),c(Z,t),t&&u(P),t&&u(F),et.d(),t&&u(G),it.d(t),t&&u(H),J=!1,o(V)}}}function Mt(t){let e,n;return e=new _t({props:{ow:t[0]}}),{c(){D(e.$$.fragment)},m(t,o){U(e,t,o),n=!0},p(t,n){const o={};1&n[0]&&(o.ow=t[0]),e.$set(o)},i(t){n||(N(e.$$.fragment,t),n=!0)},o(t){L(e.$$.fragment,t),n=!1},d(t){G(e,t)}}}function Ot(t){let e;return{c(){e=h("Fight!")},m(t,n){l(t,e,n)},d(t){t&&u(e)}}}function $t(t){let e;return{c(){e=h("Suspend")},m(t,n){l(t,e,n)},d(t){t&&u(e)}}}function It(t){let e,n,i,r,a,c,f,y,w,v,x,_,k,S,E,C,A,T,q,M,O,$,I,R,B,P,F,z,j,N,L,D,U,G,H,J,V,K,Y,W,X,Z,Q,tt,et,nt,ot,it,rt,at,st,lt,ut=t[21][0].state+"",ct=t[21][0].n+"",dt=t[21][0].req+"",ht=t[21][0].res+"",pt=t[21][1].state+"",ft=t[21][1].n+"",mt=t[21][1].req+"",gt=t[21][1].res+"";return{c(){e=d("div"),n=d("div"),i=d("button"),i.textContent="Trace",r=p(),a=d("div"),c=h("Trace:Â \n            "),f=d("label"),y=d("input"),w=h("\n              EventsÂ "),v=p(),x=d("label"),_=d("input"),k=h("\n              RequestsÂ "),S=p(),E=d("label"),C=d("input"),A=h("\n              ActionsÂ "),T=h("\n            (open console)"),q=p(),M=d("div"),O=d("div"),$=d("b"),I=h("[Me] "),R=h(ut),B=d("br"),P=h("\n            Request/"),F=d("b"),F.textContent="Response",z=h("\n            #"),j=h(ct),N=p(),L=d("pre"),D=h(dt),U=d("br"),G=d("b"),H=h(ht),J=p(),V=d("b"),K=h("[Emeny] "),Y=h(pt),W=d("br"),X=h("\n            Request/"),Z=d("b"),Z.textContent="Response",Q=h("\n            #"),tt=h(ft),et=p(),nt=d("pre"),ot=h(mt),it=d("br"),rt=d("b"),at=h(gt),g(i,"id","step"),g(n,"class","column column-left column-offset"),g(y,"type","checkbox"),g(_,"type","checkbox"),g(C,"type","checkbox"),g(a,"class","column column-right"),g(e,"class","row"),g(O,"class","column column-50 column-offset"),g(M,"class","row")},m(o,u){l(o,e,u),s(e,n),s(n,i),s(e,r),s(e,a),s(a,c),s(a,f),s(f,y),y.checked=t[1].eventOn,s(f,w),s(a,v),s(a,x),s(x,_),_.checked=t[1].requestOn,s(x,k),s(a,S),s(a,E),s(E,C),C.checked=t[1].actionOn,s(E,A),s(a,T),l(o,q,u),l(o,M,u),s(M,O),s(O,$),s($,I),s($,R),s(O,B),s(O,P),s(O,F),s(O,z),s(O,j),s(O,N),s(O,L),s(L,D),s(L,U),s(L,G),s(G,H),s(O,J),s(O,V),s(V,K),s(V,Y),s(O,W),s(O,X),s(O,Z),s(O,Q),s(O,tt),s(O,et),s(O,nt),s(nt,ot),s(nt,it),s(nt,rt),s(rt,at),st||(lt=[m(i,"click",t[25]),m(y,"change",t[41]),m(_,"change",t[42]),m(C,"change",t[43])],st=!0)},p(t,e){2&e[0]&&(y.checked=t[1].eventOn),2&e[0]&&(_.checked=t[1].requestOn),2&e[0]&&(C.checked=t[1].actionOn),2097152&e[0]&&ut!==(ut=t[21][0].state+"")&&b(R,ut),2097152&e[0]&&ct!==(ct=t[21][0].n+"")&&b(j,ct),2097152&e[0]&&dt!==(dt=t[21][0].req+"")&&b(D,dt),2097152&e[0]&&ht!==(ht=t[21][0].res+"")&&b(H,ht),2097152&e[0]&&pt!==(pt=t[21][1].state+"")&&b(Y,pt),2097152&e[0]&&ft!==(ft=t[21][1].n+"")&&b(tt,ft),2097152&e[0]&&mt!==(mt=t[21][1].req+"")&&b(ot,mt),2097152&e[0]&&gt!==(gt=t[21][1].res+"")&&b(at,gt)},d(t){t&&u(e),t&&u(q),t&&u(M),st=!1,o(lt)}}}function Rt(t){let e,n=t[17],o=[];for(let e=0;e<n.length;e+=1)o[e]=Pt(St(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);l(t,e,n)},p(t,i){if(655360&i[0]){let r;for(n=t[17],r=0;r<n.length;r+=1){const a=St(t,n,r);o[r]?o[r].p(a,i):(o[r]=Pt(a),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){c(o,t),t&&u(e)}}}function Bt(t){let e,n=t[16],o=[];for(let e=0;e<n.length;e+=1)o[e]=Ft(Et(t,n,e));return{c(){for(let t=0;t<o.length;t+=1)o[t].c();e=f()},m(t,n){for(let e=0;e<o.length;e+=1)o[e].m(t,n);l(t,e,n)},p(t,i){if(65536&i[0]){let r;for(n=t[16],r=0;r<n.length;r+=1){const a=Et(t,n,r);o[r]?o[r].p(a,i):(o[r]=Ft(a),o[r].c(),o[r].m(e.parentNode,e))}for(;r<o.length;r+=1)o[r].d(1);o.length=n.length}},d(t){c(o,t),t&&u(e)}}}function Pt(t){let e,n,o,i,r=t[62].split(".")[0]+"",a=t[19]>0?" (+"+t[19]+")":"";return{c(){e=d("option"),n=h(r),o=h(a),e.__value=i=t[62],e.value=e.__value},m(t,i){l(t,e,i),s(e,n),s(e,o)},p(t,s){131072&s[0]&&r!==(r=t[62].split(".")[0]+"")&&b(n,r),524288&s[0]&&a!==(a=t[19]>0?" (+"+t[19]+")":"")&&b(o,a),131072&s[0]&&i!==(i=t[62])&&(e.__value=i,e.value=e.__value)},d(t){t&&u(e)}}}function Ft(t){let e,n,o,i=t[57].name+"";return{c(){e=d("option"),n=h(i),e.__value=o=t[57].url,e.value=e.__value},m(t,o){l(t,e,o),s(e,n)},p(t,r){65536&r[0]&&i!==(i=t[57].name+"")&&b(n,i),65536&r[0]&&o!==(o=t[57].url)&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function zt(t){let e,n,o,i=t[57].name+"";return{c(){e=d("option"),n=h(i),e.__value=o=t[57].url,e.value=e.__value},m(t,o){l(t,e,o),s(e,n)},p(t,r){262144&r[0]&&i!==(i=t[57].name+"")&&b(n,i),262144&r[0]&&o!==(o=t[57].url)&&(e.__value=o,e.value=e.__value)},d(t){t&&u(e)}}}function jt(t){let e,n,o,i,r,a;return{c(){e=d("div"),n=d("button"),o=h("Edit my Fighter"),g(n,"id","edit"),n.disabled=i=0==t[13].length,g(e,"class","column column-right")},m(i,u){l(i,e,u),s(e,n),s(n,o),r||(a=m(n,"click",t[26]),r=!0)},p(t,e){8192&e[0]&&i!==(i=0==t[13].length)&&(n.disabled=i)},d(t){t&&u(e),r=!1,a()}}}function Nt(e){let n,o,i;return{c(){n=d("button"),n.textContent="Login",g(n,"id","login")},m(t,r){l(t,n,r),o||(i=m(n,"click",e[22]),o=!0)},p:t,d(t){t&&u(n),o=!1,i()}}}function Lt(t){let e,n,i,r,a,c,f,w,x,_,k,S,E,C,A,T,q,M,$,I,R,B,P;return{c(){e=d("div"),n=d("div"),i=d("button"),i.textContent="Create New Fighter",r=p(),a=d("div"),c=d("input"),f=p(),w=d("div"),x=d("div"),_=d("button"),k=h("Submit to FAAS WARS"),E=p(),C=d("div"),A=d("select"),T=d("option"),T.textContent="JavaScript",q=d("option"),q.textContent="Python",M=d("option"),M.textContent="Golang",$=p(),I=d("h4"),R=h(t[7]),g(i,"id","create"),g(n,"class","column column-left column-offset"),g(c,"type","text"),g(c,"placeholder","robot name"),g(c,"id","botname"),g(a,"class","column column-right"),g(e,"class","row"),g(_,"id","submit"),_.disabled=S=0==t[13].length,g(x,"class","column column-left column-offset"),T.__value="js",T.value=T.__value,q.__value="py",q.value=q.__value,M.__value="go",M.value=M.__value,void 0===t[12]&&O((()=>t[38].call(A))),g(C,"class","column column-right"),g(w,"class","row")},m(o,u){l(o,e,u),s(e,n),s(n,i),s(e,r),s(e,a),s(a,c),y(c,t[11]),l(o,f,u),l(o,w,u),s(w,x),s(x,_),s(_,k),s(w,E),s(w,C),s(C,A),s(A,T),s(A,q),s(A,M),v(A,t[12]),l(o,$,u),l(o,I,u),s(I,R),B||(P=[m(i,"click",t[23]),m(c,"input",t[36]),m(_,"click",t[37]),m(A,"change",t[38])],B=!0)},p(t,e){2048&e[0]&&c.value!==t[11]&&y(c,t[11]),8192&e[0]&&S!==(S=0==t[13].length)&&(_.disabled=S),4096&e[0]&&v(A,t[12]),128&e[0]&&b(R,t[7])},d(t){t&&u(e),t&&u(f),t&&u(w),t&&u($),t&&u(I),B=!1,o(P)}}}function Dt(e){let n,o,i,r,a,c,p,f,m,b,y,w,v;return{c(){n=d("div"),o=d("div"),i=d("h4"),r=h("Welcome to\n              "),a=d("b"),a.textContent="FAAS Wars",c=h("\n              v"),p=h("1.3"),f=h("."),m=d("br"),b=h("Please check the\n              "),y=d("a"),y.textContent="License",w=h("."),v=d("br"),g(y,"href","license.html"),g(o,"class","column column-center column-offset"),g(n,"class","row")},m(t,e){l(t,n,e),s(n,o),s(o,i),s(i,r),s(i,a),s(i,c),s(i,p),s(i,f),s(i,m),s(i,b),s(i,y),s(i,w),s(i,v)},p:t,d(t){t&&u(n)}}}function Ut(t){let e,n,o,i,r,a,c,h,f;function m(t,e){return""==t[3]?At:Ct}let b=m(t),y=b(t);const w=[Mt,qt,Tt],v=[];function x(t,e){return""!=t[20]?0:t[5]?2:1}return c=x(t),h=v[c]=w[c](t),{c(){e=d("main"),n=d("section"),o=d("div"),y.c(),i=p(),r=d("div"),r.innerHTML='<canvas id="arena" width="500" height="500" class="svelte-1fcsikx"></canvas>',a=p(),h.c(),g(o,"class","row"),g(r,"class","row"),g(n,"class","container"),g(e,"class","wrapper")},m(t,u){l(t,e,u),s(e,n),s(n,o),y.m(o,null),s(n,i),s(n,r),s(n,a),v[c].m(n,null),f=!0},p(t,e){b===(b=m(t))&&y?y.p(t,e):(y.d(1),y=b(t),y&&(y.c(),y.m(o,null)));let i=c;c=x(t),c===i?v[c].p(t,e):(z(),L(v[i],1,1,(()=>{v[i]=null})),j(),h=v[c],h?h.p(t,e):(h=v[c]=w[c](t),h.c()),N(h,1),h.m(n,null))},i(t){f||(N(h),f=!0)},o(t){L(h),f=!1},d(t){t&&u(e),y.d(),v[c].d()}}}let Gt=!0,Ht=/^\w{1,60}$/g;function Jt(t,e,n){let o,i,r;a(t,dt,(t=>n(19,o=t))),a(t,ct,(t=>n(20,i=t))),a(t,lt,(t=>n(21,r=t)));var s=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((o=o.apply(t,e||[])).next())}))};let l,u,c,{base:d}=e,{apihost:h}=e,{namespace:p}=e,{ow:f}=e,m=void 0===f?"":"Choose opponents",g="Select Opponents",b=!1,y=!1,w="",v=!1,_=!1,k="",E="js",C=[],A=[],T=A,q=A,M="",O="",$=T,I=C,R=q,B={js:d+"/src/JsBot.js",go:d+"/src/GoBot.go",py:d+"/src/PyBot.py"};function P(){return s(this,void 0,void 0,(function*(){A=yield async function(){return Z("https://apigcp.nimbella.io/api/v1/web/nimbots/rumble/public").then((t=>t.json())).catch((t=>[]))}();for(let t=0;t<A.length;t++){let e=A[t];A[t].url=e.url+":"+e.rewards,A[t].name=e.name+(e.rewards>0?" (+"+e.rewards+")":"")}T=Object.assign([],A),T.sort((()=>.5-Math.random())),q=Object.assign([],A),q.sort((()=>.5-Math.random())),void 0!==f&&n(13,C=yield f.list()),F()}))}function F(){n(16,$=T.filter((t=>-1!==t.name.toLowerCase().indexOf(M.toLowerCase())))),n(17,I=C.filter((t=>-1!==t.toLowerCase().indexOf(M.toLowerCase())))),n(18,R=q.filter((t=>-1!==t.name.toLowerCase().indexOf(O.toLowerCase())))),C.length>0?n(8,u=I[0]):n(8,u=$[0].url),n(9,c=R[0].url),console.log("updated",u,c)}let z=ut.subscribe((t=>{_=""!=t,P()}));function j(t){n(3,m="Game over"),-2==t?(L="ready",n(7,w="")):-1==t?(L="draw",n(7,w="")):0==t?(L="won",n(7,w="Great Achievement! Share it with your friends!")):(L="lose",n(7,w="")),n(4,g="Select Opponents"),n(5,b=!1),n(10,v=!1),l.stop(),lt.set([{n:0,req:"",res:"",state:""},{n:0,req:"",res:"",state:""}])}function N(t,e,o){n(4,g=t),n(10,v=!1),lt.update((t=>(t[0].state=e,t[1].state=o,t)))}let L=void 0===f?"splash":"ready",D=new ht({splash:"img/splash.png",ready:"img/ready.png",lose:"img/lose.png",won:"img/won.png",draw:"img/draw.png"});function U(){let t=document.getElementById("arena").getContext("2d");t.clearRect(0,0,500,500),t.drawImage(D.get(L),0,0)}!function(t){S().$$.after_update.push(t)}((()=>{_||b||U()})),function(t){S().$$.on_mount.push(t)}((()=>{let t=document.getElementById("arena");n(2,l=new mt(parseInt(t.getAttribute("width")),parseInt(t.getAttribute("height")),j,N)),P(),D.loadAll((()=>U()))})),function(t){S().$$.on_destroy.push(t)}(z);return t.$$set=t=>{"base"in t&&n(29,d=t.base),"apihost"in t&&n(30,h=t.apihost),"namespace"in t&&n(31,p=t.namespace),"ow"in t&&n(0,f=t.ow)},[f,ot,l,m,g,b,y,w,u,c,v,k,E,C,M,O,$,I,R,o,i,r,function(){Z(d+"/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:prompt("Password:")})}).then((t=>t.json())).then((t=>{console.log(t),"error"in t?alert(t.error):"token"in t&&(alert("OK!"),n(0,f=new Q(h,t.token,p)),window.ow=f)})).catch((t=>{console.log(t),alert("Unexpected error - check logs")}))},function(){return s(this,void 0,void 0,(function*(){if(!k.match(Ht))return alert("Invalid Robot Name"),!1;let t;return Z(B[E]).then((t=>{if(t.ok)return t.text();throw t.statusText})).then((e=>(t=k+"."+E,f.save(t,e,!1)))).then((e=>s(this,void 0,void 0,(function*(){if(console.log(e),"error"in e)throw e.error;return ut.set(t),!0})))).catch((t=>(alert(t),!1)))}))},F,function(){n(4,g="Tracing..."),n(10,v=!1),n(3,m=l.trace())},function(){console.log(u),ut.set(u),l.stop(),_=!0},function(){console.log("mybot",u),console.log("enemybot",c);let t=0==C.length?u.split(":")[0]:f.namespace+"/default/"+u.split(".")[0],e=0==C.length?parseInt(u.split(":")[1]):o,i=c.split(":")[0],r=parseInt(c.split(":")[1]),a=[d+t,d+i],s=document.getElementById("arena"),h=[[360*Math.random(),360*Math.random()],[360*Math.random(),360*Math.random()]],p=[e,r];l.webinit(s.getContext("2d"),a,h,p),n(5,b=!0),n(3,m="May the FAAS be with you!"),n(4,g="Fighting!"),n(10,v=!0),l.draw(),l.start()},function(){n(10,v=!v),v?(n(4,g="Fighting!"),l.start()):(n(4,g="Suspended..."),l.stop())},d,h,p,function(){M=this.value,n(14,M)},function(){u=x(this),n(8,u),n(16,$),n(17,I)},function(){O=this.value,n(15,O)},function(){c=x(this),n(9,c),n(18,R)},function(){k=this.value,n(11,k)},()=>{ct.set(u)},function(){E=x(this),n(12,E)},()=>{n(5,b=!1),n(10,v=!1),l.terminate()},function(){y=this.checked,n(6,y)},function(){ot.eventOn=this.checked,n(1,ot)},function(){ot.requestOn=this.checked,n(1,ot)},function(){ot.actionOn=this.checked,n(1,ot)}]}class Vt extends V{constructor(t){super(),J(this,t,Jt,Ut,r,{base:29,apihost:30,namespace:31,ow:0},[-1,-1,-1])}}function Kt(e){let n;return{c(){n=d("div"),g(n,"class","column column-center column-offset")},m(t,e){l(t,n,e),n.innerHTML='\n<h1 id="how-to-code-your-fighter">How to code your fighter</h1>\n<p>This document is a quick recap of the API. You can also <a href="https://nimbella.com/blog/faas-wars-serverless-virtual-robot-competition?utm_source=subdomain&amp;utm_medium=landing&amp;utm_campaign=faaswars">read this tutorial</a>.</p>\n<p>You control your fighter writing a serverless action. <a href="https://github.com/openwhisk-blog/nimbots/tree/master/packages/default">Check here the source code of the sample fighters</a>. You can use the integrated editor to code your fighter but you need to setup an account in Nimbella to play.</p>\n<p>A serverless action is a function, written in either Javascript, Python or Go, that receive as input a json document and returns its answer in json. In each programming language the json is serialized and deserialized first in a data structure appropriate for you programming language. When you create a fighter a suitable example is provided.</p>\n<p>Each fighter will communicate with the action to receive orders. The action is invoked when an event occurr. In response to an event you return a list of orders, in the format described below.</p>\n<p>The fighter has an energy level that starts at 5 and decrease by one each time you are hit. When it reaches <code>0</code> you lose. You lose also if your controlling actions returns an error, so be careful in your coding.</p>\n<h2 id="events">Events</h2>\n<p>The fighter receive a message in the following format:</p>\n<pre><code>{\n  &quot;event&quot;: &quot;idle&quot;,\n  &quot;energy&quot;: 5,\n  &quot;x&quot;: 110,\n  &quot;y&quot;: 240,\n  &quot;angle&quot;: 23\n  &quot;tank_angle&quot;: 232,\n  &quot;turret_angle&quot;: 150,\n  &quot;enemy_spot&quot;: {},\n  &quot;data&quot;: {}\n}</code></pre>\n<ul>\n<li>The <code>event</code> can be:\n<ul>\n<li><code>idle</code>: the fighter has its order queue empty and and asks for new orders</li>\n<li><code>enemy-spot</code>: the fighter has spotted the enemy and can hit him firing</li>\n<li><code>hit</code>: the fighter was hit by an enemy bullet</li>\n<li><code>wall-collide</code>: the fighter collided with a wall</li>\n</ul></li>\n<li><code>x</code> and <code>y</code> are the position in the battlefiel,</li>\n<li><code>tank_angle</code> and <code>turret_angle</code> are the angles of the tank and of the turret in degrees.</li>\n<li><code>angle</code> is the sum of the angle of the turret and the tank, modulo 360</li>\n<li><code>energy</code> is your energy level,</li>\n</ul>\n<p>When the event is <code>enemy_spot</code> there is also the field <code>enemy_spot</code> in this format:</p>\n<pre><code>{\n    &quot;id&quot;: 1,\n    &quot;x&quot;: 291,\n    &quot;y&quot;: 180,\n    &quot;angle&quot;: 23,\n    &quot;distance&quot;: 202,\n    &quot;energy&quot;: 1\n}</code></pre>\n<p>where <code>x</code> and <code>y</code> are the enemy location, <code>angle</code> is the absolute angle to fire him, <code>distance</code> is its distance and <code>energy</code> the enemy energy level.</p>\n<p>Lastly the <code>data</code> field is a field that you can set with your own values with the <code>data</code> command, to save a state for further actions.</p>\n<h2 id="commands">Commands</h2>\n<p>When you receive an event you decide what to do and give orders to the fighter.</p>\n<p>The commands are an array of maps. For example:</p>\n<pre><code>[{\n    &quot;move_forwards&quot;: 50,\n    &quot;shoot&quot;: true\n },\n {\n  &quot;move_backwards&quot;: 50,\n  &quot;turn_turret_right&quot;: 180,\n  &quot;shoot&quot;: true\n}]</code></pre>\n<p>Each map must contains one (and only one) key/value entry describing a sequential action. If you specify more than one sequential action, only one will be executed (and we do not tell you which one, so do not do it!).</p>\n<p>The sequential actions are:</p>\n<ul>\n<li><code>move_forwads: &lt;number&gt;</code>: move forward of the given number of pixels</li>\n<li><code>move_backwards: &lt;number&gt;</code>: move backwards of the given number of pixels</li>\n<li><code>move_opposide: &lt;number&gt;</code>: move in the opposite direction of where you were moving - useful when you hit a wall</li>\n<li><code>turn_left: &lt;number&gt;</code>: turn the tanks to the left of the given angle in degrees</li>\n<li><code>turn_right: &lt;number&gt;</code>: turn the tanks to the right of the given angle in degrees</li>\n</ul>\n<p>For each sequential action you can also specify a parallel action, that is done at the same time as the sequential (that is: the tank can fire and move the turret while it is moving in a given direction)</p>\n<p>The parallel actions are:</p>\n<ul>\n<li><code>turn_turret_left: &lt;number&gt;</code>: turn the turret to the left of the given angle in degrees</li>\n<li><code>turn_turret_right: &lt;number&gt;</code>: turn the turret to the right of the given angle in degrees</li>\n<li><code>shot: true</code>: fires a bullet; note you can fire up to 5 bullets at the same time</li>\n<li><code>yell: &lt;string&gt;</code>: yell a message that will be displayed in the battle field</li>\n</ul>\n'},p:t,i:t,o:t,d(t){t&&u(n)}}}class Yt extends V{constructor(t){super(),J(this,t,null,Kt,r,{})}}function Wt(t){let e,n,i,r,a,c,f,y,v,x,_,k,S,E,C,A,T,q,M,O,$,I,R,B,P,F;return R=new Yt({}),{c(){e=d("main"),n=d("section"),i=d("div"),r=d("iframe"),c=p(),f=d("br"),y=p(),v=d("div"),x=d("div"),_=d("button"),_.textContent="Save",k=h("\n        Â \n        "),S=d("button"),S.textContent="Cancel",E=h("\n        Â \n        "),C=d("button"),C.textContent="Delete",A=p(),T=d("div"),q=d("h3"),M=d("tt"),O=h(t[0]),$=p(),I=d("div"),D(R.$$.fragment),g(r,"title","editor"),g(r,"id","editor"),r.src!==(a="editor.html")&&g(r,"src","editor.html"),w(r,"height","500px"),w(r,"width","100%"),g(r,"frameborder","0"),g(r,"scrolling","no"),g(i,"class","row"),g(_,"id","done"),g(S,"id","done"),g(C,"id","done"),g(x,"class","float-left"),g(T,"class","float-right"),g(v,"class","clearfix"),g(I,"class","row"),g(n,"class","container"),g(e,"class","wrapper")},m(o,a){l(o,e,a),s(e,n),s(n,i),s(i,r),s(n,c),s(n,f),s(n,y),s(n,v),s(v,x),s(x,_),s(x,k),s(x,S),s(x,E),s(x,C),s(v,A),s(v,T),s(T,q),s(q,M),s(M,O),s(n,$),s(n,I),U(R,I,null),B=!0,P||(F=[m(r,"load",t[1]),m(_,"click",t[4]),m(S,"click",t[2]),m(C,"click",t[3])],P=!0)},p(t,[e]){(!B||1&e)&&b(O,t[0])},i(t){B||(N(R.$$.fragment,t),B=!0)},o(t){L(R.$$.fragment,t),B=!1},d(t){t&&u(e),G(R),P=!1,o(F)}}}function Xt(t,e,n){let o;a(t,ut,(t=>n(0,o=t)));var i=this&&this.__awaiter||function(t,e,n,o){return new(n||(n=Promise))((function(i,r){function a(t){try{l(o.next(t))}catch(t){r(t)}}function s(t){try{l(o.throw(t))}catch(t){r(t)}}function l(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,s)}l((o=o.apply(t,e||[])).next())}))};let r,{ow:s}=e;return t.$$set=t=>{"ow"in t&&n(5,s=t.ow)},[o,function(){return i(this,void 0,void 0,(function*(){r=window.frames[0];let t=o,e=yield s.load(t);r.setValue(t,e)}))},function(){confirm("Are you sure you want to lose your changes?")&&(r.setValue("",""),ut.set(""))},function(){return i(this,void 0,void 0,(function*(){let t=o;t=t.split(".")[0];s.namespace.split("-")[0];confirm("Are you sure you want to delete this Robot?")&&s.del(o).then((()=>{r.setValue("",""),ut.set("")}))}))},function(){return i(this,void 0,void 0,(function*(){let t=o;t=o.split(".")[0];let e=s.namespace;e=e.split("-")[0];let n=yield r.getValue();s.save(o,n,!0).then((()=>{ut.set("")})),yield function(t,e){let n={key:t,value:e};return Z("https://apigcp.nimbella.io/api/v1/web/nuvolaris/rumble/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}).then((t=>t.text())).then((t=>t))}(`${s.namespace}:${o}`,n)}))},s]}class Zt extends V{constructor(t){super(),J(this,t,Xt,Wt,r,{ow:5})}}function Qt(e){let n,o,i;return n=new Zt({props:{ow:e[1]}}),{c(){D(n.$$.fragment),o=h("`")},m(t,e){U(n,t,e),l(t,o,e),i=!0},p:t,i(t){i||(N(n.$$.fragment,t),i=!0)},o(t){L(n.$$.fragment,t),i=!1},d(t){G(n,t),t&&u(o)}}}function te(e){let n,o;return n=new Vt({props:{base:e[3],namespace:e[2],apihost:e[4],ow:e[1]}}),{c(){D(n.$$.fragment)},m(t,e){U(n,t,e),o=!0},p:t,i(t){o||(N(n.$$.fragment,t),o=!0)},o(t){L(n.$$.fragment,t),o=!1},d(t){G(n,t)}}}function ee(t){let e,n,o,i;const r=[te,Qt],a=[];function s(t,e){return""==t[0]?0:1}return e=s(t),n=a[e]=r[e](t),{c(){n.c(),o=f()},m(t,n){a[e].m(t,n),l(t,o,n),i=!0},p(t,[i]){let l=e;e=s(t),e===l?a[e].p(t,i):(z(),L(a[l],1,1,(()=>{a[l]=null})),j(),n=a[e],n?n.p(t,i):(n=a[e]=r[e](t),n.c()),N(n,1),n.m(o.parentNode,o))},i(t){i||(N(n),i=!0)},o(t){L(n),i=!1},d(t){a[e].d(t),t&&u(o)}}}function ne(t,e,n){let o,i;a(t,ut,(t=>n(0,o=t)));let r=new URL(location.href),s=r.pathname.split("/"),l=s[s.length-4];r.pathname=s.slice(0,-1).join("/"),"localhost:5000"==location.host&&(r.port="3233");let u=r.href;r.pathname="";let c=r.href;return[o,i,l,u,c]}return new class extends V{constructor(t){super(),J(this,t,ne,ee,r,{})}}({target:document.body})}();
//# sourceMappingURL=main.js.map
